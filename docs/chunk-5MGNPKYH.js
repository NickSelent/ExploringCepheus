import{Z as p,aa as S,h as u,i as g}from"./chunk-JYIFF6EO.js";var d=class{};function C(s){return s&&typeof s.connect=="function"&&!(s instanceof u)}var c=function(s){return s[s.REPLACED=0]="REPLACED",s[s.INSERTED=1]="INSERTED",s[s.MOVED=2]="MOVED",s[s.REMOVED=3]="REMOVED",s}(c||{}),V=new S("_ViewRepeater");var f=class{applyChanges(e,t,i,h,n){e.forEachOperation((l,a,_)=>{let o,r;if(l.previousIndex==null){let m=i(l,a,_);o=t.createEmbeddedView(m.templateRef,m.context,m.index),r=c.INSERTED}else _==null?(t.remove(a),r=c.REMOVED):(o=t.get(a),t.move(o,_),r=c.MOVED);n&&n({context:o?.context,operation:r,record:l})})}detach(){}};var E=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new g;constructor(e=!1,t,i=!0,h){this._multiple=e,this._emitChanges=i,this.compareWith=h,t&&t.length&&(e?t.forEach(n=>this._markSelected(n)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);let t=this.selected,i=new Set(e.map(n=>this._getConcreteValue(n)));e.forEach(n=>this._markSelected(n)),t.filter(n=>!i.has(this._getConcreteValue(n,i))).forEach(n=>this._unmarkSelected(n));let h=this._hasQueuedChanges();return this._emitChangeEvent(),h}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,t){if(this.compareWith){t=t??this._selection;for(let i of t)if(this.compareWith(e,i))return i;return e}else return e}};var D=(()=>{class s{_listeners=[];notify(t,i){for(let h of this._listeners)h(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(i){return new(i||s)};static \u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{d as a,C as b,c,V as d,f as e,D as f,E as g};
